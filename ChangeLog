2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* data/art/Makefile.am:
	* lib/egg/Makefile.am:
	* lib/egg/egg-editable-toolbar.c: (set_drag_cursor):

	Use a costum icon for the cursor

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-editable-toolbar.c: (set_drag_cursor),
	(unset_drag_cursor), (create_item),
	(egg_editable_toolbar_set_edit_mode):

	Better implementation of cursor.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-editable-toolbar.c: (enter_notify_cb),
	(leave_notify_cb), (create_item):

	Show a different cursor when hovering toolbar items
	in edit mode.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (add_bookmarks_source),
	(import_dialog_response_cb), (cmd_bookmarks_import):

	Port to new combo.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (add_by_date_filter),
	(time_combo_changed_cb), (build_search_box), (save_date_filter):

	Port to new combo. Size is wrong, prolly a bug in combo
	size request, will look at it later.

2003-10-13  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/mozilla-notifiers.cpp:
	(get_system_language):

	Return "en" when in C locale.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/EphyWrapper.cpp:

	Include config.h.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/mozilla-embed.cpp:

	Adapt EphyWrapper::GetEncoding to varying mozilla APIs.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* embed/ephy-embed.c: (ephy_embed_get_encoding):
	* embed/ephy-embed.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/mozilla-embed.cpp:
	* src/ephy-encoding-menu.c: (ephy_encoding_menu_verb_cb),
	(update_encoding_menu_cb), (ephy_encoding_menu_set_window):

	Encoding menu improvements, part 2: Implement ephy_embed_get_encoding,
	and use it in the menu to indicate the encoding of the loaded page.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-encoding-menu.c: (ephy_encoding_menu_get_type),
	(ephy_encoding_menu_verb_cb), (ephy_encoding_menu_init),
	(ephy_encoding_menu_set_window), (ephy_encoding_menu_set_property),
	(ephy_encoding_menu_get_property), (ephy_encoding_menu_class_init),
	(ephy_encoding_menu_new), (ephy_encoding_menu_rebuild):
	* src/ephy-encoding-menu.h:

	Encodings menu improvements, part 1: Ported to new gtk ui manager
	api, and general code cleanups.

2003-10-10  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/FilePicker.cpp:
	* embed/mozilla/FilePicker.h:
	* embed/mozilla/mozilla-embed-single.cpp:
	* lib/Makefile.am:
	* lib/ephy-dialog.c: (get_pref_type_from_widget),
	(prefs_connect_signals), (load_props), (save_props):
	* lib/ephy-gui.h:
	* lib/widgets/Makefile.am:
	* src/Makefile.am:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-topic-action.c:
	* src/ephy-history-window.c:

	Reenable deprecated api where necessary, fixup some
	header inclusions.
	Remove unused color picker control in ephy-dialog.
	Remove unused file types optionmenu in Filepicker.

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-tree-model-node.c: (root_child_removed_cb),
	(get_path_real), (root_child_added_cb),
	(ephy_tree_model_node_update_node), (root_child_changed_cb),
	(root_children_reordered_cb), (root_destroy_cb),
	(ephy_tree_model_node_class_init), (ephy_tree_model_node_init),
	(ephy_tree_model_node_finalize),
	(ephy_tree_model_node_add_prop_column),
	(ephy_tree_model_node_add_func_column),
	(ephy_tree_model_node_get_column_type),
	(ephy_tree_model_node_get_value), (ephy_tree_model_node_get_iter),
	(ephy_tree_model_node_get_path), (ephy_tree_model_node_iter_next),
	(ephy_tree_model_node_iter_children),
	(ephy_tree_model_node_iter_n_children),
	(ephy_tree_model_node_iter_nth_child),
	(ephy_tree_model_node_iter_from_node),
	(ephy_tree_model_node_tree_model_init):
	* lib/widgets/ephy-tree-model-node.h:

	Merge fixes from branch and clean up.

2003-10-06  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-notebook.c: (find_notebook_at_pointer),
	(ephy_notebook_init), (ephy_notebook_finalize):

	Allow dragging of tabs to a window even when the tabs bar is not
	shown. Fixes bug #123908.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (setup_filters),
	(site_node_selected_cb), (search_entry_search_cb),
	(time_optionmenu_changed_cb):
	
	More granular filtering update

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (update_host_on_child_remove),
	(update_hosts), (page_removed_from_host_cb), (ephy_history_init),
	(ephy_history_finalize):

	Update host last visit when removing sites from it.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (search_entry_search_cb):
	
	update priv->select_node, signals are blocked so it would
	not be updated otherwise

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-node-view.c: (did_not_drag):

	Do not unselect all on single selection mode, to not generate
	useless node selection changes.

	* src/ephy-history-window.c: (site_node_selected_cb):

	Do not refilter if the new selected node is the same
	as the old one.

2003-10-03  Christian Persch  <chpe@cvs.gnome.org>

	* lib/egg/egg-toolbars-model.c: (safe_save_xml),
	(egg_toolbars_model_load):

	Check for failed load of the toolbars model from the XML file,
	and fix the check for failed save of same to the XML file.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* src/bookmarks/ephy-bookmarks-menu.c: (add_bookmarks_menu),
	(ephy_bookmarks_menu_rebuild):

	Use new gtk api for empty submenus

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-completion-model.c: (node_iter_from_node),
	(ephy_completion_model_init), (ephy_completion_model_get_value),
	(ephy_completion_model_get_iter), (ephy_completion_model_get_path),
	(ephy_completion_model_iter_next),
	(ephy_completion_model_iter_children),
	(ephy_completion_model_iter_n_children),
	(ephy_completion_model_iter_nth_child):

	Add stamp.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (completion_func),
	(match_selected_cb), (ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (sort_func),
	(ephy_location_entry_set_completion):
	* lib/widgets/ephy-location-entry.h:
	* src/Makefile.am:
	* src/ephy-completion-model.c: (ephy_completion_model_class_init),
	(root_child_removed_cb), (node_iter_from_node), (get_path_real),
	(root_child_added_cb), (root_child_changed_cb), (connect_signals),
	(ephy_completion_model_init),
	(ephy_completion_model_get_column_type), (init_text_col),
	(init_action_col), (init_keywords_col), (init_relevance_col),
	(ephy_completion_model_get_value),
	(ephy_completion_model_get_iter):
	* src/ephy-location-action.c: (connect_proxy):

	Implement our own completion model. The big part of the
	new location entry impl is done. When gtk completion will
	be fixed I'll be able to merge this on head.

2003-10-05  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_class_init), (entry_activate_cb):
	* lib/widgets/ephy-location-entry.h:

	Remove the activated signal.

	* src/ephy-location-action.c: (action_activated_cb),
	(location_url_activate_cb), (remove_completion_actions),
	(add_completion_actions), (connect_proxy),
	(ephy_location_action_init):

	Just use entry activate signal. Implement smart
	bookmarks activation.

2003-10-05  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/ephy-node-common.h:
	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_get_entry):
	* lib/widgets/ephy-location-entry.h:
	* src/bookmarks/ephy-bookmark-action.c: (sync_bookmark_properties):
	* src/bookmarks/ephy-bookmarks-export.c:
	(ephy_bookmarks_export_rdf):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_init),
	(update_has_smart_address), (ephy_bookmarks_add),
	(ephy_bookmarks_set_address), (ephy_bookmarks_unset_keyword),
	(ephy_bookmarks_get_smart_bookmarks):
	* src/bookmarks/ephy-bookmarks.h:

	Modify smart bookmarks to use a separate root instead
	of a property.

	* src/ephy-location-action.c: (remove_completion_actions),
	(add_completion_actions), (connect_proxy), (init_actions_list),
	(update_actions_list), (actions_child_removed_cb),
	(actions_child_added_cb), (actions_child_changed_cb),
	(ephy_location_action_init), (ephy_location_action_finalize):

	Implement smart bookmarks as location actions.

2003-10-05  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (add_to_history),
	(entry_activate_cb), (ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (save_location_history),
	(ephy_location_entry_finalize),
	(ephy_location_entry_clear_history):
	
	Implement location history.

	* lib/widgets/ephy-tree-model-node.c: (root_children_reordered_cb):

	Fixup reorder notification.

2003-10-03  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (match_selected_cb),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_add_completion):

	Do not create multiple gtk completions, open the
	url when a match is selected.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/Makefile.am:
	* lib/egg/eggtreemodelunion.c:
	* lib/egg/eggtreemodelunion.h:

	Add from libegg.

	* lib/widgets/ephy-location-entry.c: (completion_func),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_add_completion):
	* lib/widgets/ephy-location-entry.h:
	* lib/widgets/ephy-tree-model-node.c:
	(ephy_tree_model_node_get_value):
	* src/ephy-location-action.c: (connect_proxy):

	Merge bookmarks in autocompletion and implement
	case unsensitive match.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (completion_func),
	(ephy_location_entry_init), (ephy_location_entry_add_completion):

	Costum match function to deal with prefixes.

	* lib/widgets/ephy-tree-model-node.c:
	(ephy_tree_model_node_get_column_type),
	(ephy_tree_model_node_get_value):

	Fix column indexes.

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (entry_button_press_cb),
	(ephy_location_entry_construct_contents):

	Put back double click -> select all

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (location_focus_out_cb),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (ephy_location_entry_finalize),
	(ephy_location_entry_add_completion),
	(ephy_location_entry_set_location),
	(ephy_location_entry_get_location), (ephy_location_entry_activate),
	(ephy_location_entry_clear_history):
	* lib/widgets/ephy-location-entry.h:

	cleanups

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (ephy_history_get_type),
	(ephy_history_init), (ephy_history_visited):
	* lib/Makefile.am:
	* lib/ephy-autocompletion-source.c:
	* lib/ephy-autocompletion-source.h:
	* lib/ephy-autocompletion.c:
	* lib/ephy-autocompletion.h:
	* lib/widgets/Makefile.am:
	* lib/widgets/ephy-autocompletion-window.c:
	* lib/widgets/ephy-autocompletion-window.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_get_type),
	(bookmarks_changed_cb), (bookmarks_removed_cb),
	(ephy_bookmarks_init), (ephy_bookmarks_add):

	Remove old implementation completely

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_class_init), (editable_changed_cb),
	(entry_activate_cb), (ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (ephy_location_entry_finalize),
	(ephy_location_entry_new), (ephy_location_entry_add_completion),
	(ephy_location_entry_set_location),
	(ephy_location_entry_clear_history):
	* lib/widgets/ephy-location-entry.h:
	* lib/widgets/ephy-tree-model-node.c:
	(ephy_tree_model_node_add_prop_column),
	(ephy_tree_model_node_add_func_column):
	* src/ephy-location-action.c: (connect_proxy):
	* src/ephy-shell.c: (ephy_shell_finalize),
	(ephy_shell_get_session):
	* src/ephy-shell.h:

	Beginning of new location entry implementation

2003-09-30  Marco Pesenti Gritti  <marco@gnome.org>

	* data/epiphany.schemas.in:
	* data/ui/epiphany-history-window-ui.xml:
	* src/ephy-history-window.c: (set_columns_visibility),
	(cmd_view_columns), (get_details_value),
	(ephy_history_window_construct):

	Implement view menu.

2003-09-30  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-history-window.c: (build_search_box):

	Use ngettext.

2003-09-30  Christian Persch  <chpe@cvs.gnome.org>

	* embed/print-dialog.c: (print_get_info):

	Don't pass NULL to gnome_vfs_expand_initial_tilde.

2003-09-30  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c:
	* src/ephy-history-window.c: (build_search_box):

	More accurate description for Ever filter.
	Keep the backend as is, so we dont have to change
	it if we change history expire.

2003-09-29  Marco Pesenti Gritti  <marco@gnome.org>

	* data/default-prefs.js:

	Add defaults in points for fonts

2003-09-28  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/mozilla-embed-single.cpp:

	The file picker dir can be NULL, check before
	trying to expand tilde.

	* src/bookmarks/ephy-bookmarks-editor.c:
	(import_dialog_response_cb), (cmd_bookmarks_import):

	Implement import from a file

2003-09-27  Xan Lopez  <xan@masilla.org>

	* configure.in:

	Forgot this.

2003-09-27  Xan Lopez  <xan@masilla.org>

	* configure.in:
	* embed/mozilla/ContentHandler.cpp:

	API sync, from galeon.

2003-09-27  Christian Persch  <chpe@cvs.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (cmd_bookmarks_import):
	* src/bookmarks/ephy-bookmarks-import.h:

	Offer to import from Firebird too.

2003-09-27  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/ephy-gui.c: (ephy_gui_get_pixbuf_from_mime_type):

	Simpler implementation.

	* lib/widgets/ephy-spinner.c: (ephy_spinner_load_images):
	* src/ephy-shell.c: (ephy_shell_init):

	Pass 0 as flags

2003-09-27  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/ContentHandler.cpp:
	* lib/ephy-gui.c: (make_mime_name),
	(ephy_gui_get_pixbuf_from_mime_type):
	* lib/ephy-gui.h:
	* lib/widgets/ephy-spinner.c: (ephy_spinner_init),
	(ephy_spinner_theme_changed), (ephy_spinner_load_images),
	(ephy_spinner_finalize):
	* src/ephy-shell.c: (ephy_shell_init):

	Use gtkicontheme, and use it also for mime icons.

2003-09-26  Marco Pesenti Gritti  <marco@gnome.org>

	* data/epiphany.schemas.in:
	* lib/ephy-node-filter.c: (ephy_node_filter_evaluate):
	* src/ephy-history-window.c: (ephy_history_window_finalize),
	(add_by_site_filter), (add_by_date_filter), (add_by_word_filter),
	(setup_filters), (site_node_selected_cb), (search_entry_search_cb),
	(time_optionmenu_changed_cb), (build_search_box),
	(ephy_history_window_construct), (save_date_filter),
	(ephy_history_window_dispose):

	Implement history time filter

2003-09-26  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-window.c:

	Remove unused includes, they was causing warnings on solaris

