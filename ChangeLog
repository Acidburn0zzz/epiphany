2003-10-25  Christian Persch  <chpe@cvs.gnome.org>

	* data/default-prefs.js:

	Add missing font.size prefs for zh-HK font group.

2003-10-25  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/Makefile.am:
	* embed/ephy-command-manager.c: (ephy_command_manager_get_type),
	(ephy_command_manager_base_init),
	(ephy_command_manager_do_command),
	(ephy_command_manager_can_do_command),
	(ephy_command_manager_observe_command):
	* embed/ephy-command-manager.h:

	Interface for commands. Useful for undo. (cmd_undo works).

	* embed/ephy-embed.c:
	* embed/ephy-embed.h:

	Remove all clipboard calls.

	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-embed.cpp:

	Implement part of the commands interface.
	No regressions.

	* src/window-commands.c: (window_cmd_edit_cut),
	(window_cmd_edit_copy), (window_cmd_edit_paste),
	(window_cmd_edit_select_all):

	Implement clipboard using commands.

2003-10-25  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (downloader_view_build_ui),
	(download_dialog_delete_cb):

	Remove a debug print, don't do anything on wm delete event.

2003-10-25  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/GtkNSSDialogs.cpp:
	* embed/mozilla/GtkNSSDialogs.h:
	* embed/mozilla/GtkNSSKeyPairDialogs.cpp:
	* embed/mozilla/GtkNSSKeyPairDialogs.h:
	* embed/mozilla/Makefile.am:

	Resync with galeon.

2003-10-25  Xan Lopez  <xan@masilla.org>

	* data/glade/epiphany.glade:
	* embed/downloader-view.c: (downloader_view_init),
	(downloader_view_finalize), (get_row_from_download),
	(download_changed_cb), (downloader_view_add_download),
	(downloader_view_build_ui), (downloader_view_remove_download),
	(download_dialog_delete_cb):

	Remove open button, autclose when there are no downloads left.

2003-10-25  David Bordoley <bordoley@msu.edu>

	* src/ephy-tab.c: (build_net_state_message):

	don't pollute the statusbar with a "Done." message.

2003-10-24  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-encoding-dialog.c: (ephy_encoding_dialog_response_cb),
	(view_node_selected_cb), (automatic_toggled_cb),
	(ephy_encoding_dialog_init):
	* data/glade/epiphany.glade:

	Made encoding dialog auto-apply.

2003-10-24  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-toolbar-editor.c: (set_drag_cursor),
	(event_box_realize_cb), (editor_create_item):

	Use special drag cursors also for editor.
	Do not hide separator when dragging it.

2003-10-24  David Bordoley <bordoley@msu.edu>

	* data/art/hand-open.png:

	Took the open hand icon used in eog, did some
	gimp magic. Why am I up at 4:30 in the morning
	doing this?

2003-10-25  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/EphyHeaderSniffer.cpp:

	Use translatable title for untitled pages.

2003-10-24  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:

	Add an helper to initialize downloads.

	* embed/ephy-embed-persist.h:

	Add a flag to ask destination.

	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:

	Use the helper. Add code to determine a good
	filename. 

	* embed/mozilla/mozilla-embed-persist.cpp:

	Use a MozDownload directly if there is a dest set,
	it doesnt make sense to use sniffer for favicons.

2003-10-23  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-editable-toolbar.c: (create_item_from_action),
	(egg_editable_toolbar_construct):

	Remove invalid items

2003-10-23  Marco Pesenti Gritti  <marco@gnome.org>

	* src/toolbar.c: (toolbar_spinner_start), (toolbar_spinner_stop):

	Make the spinner spin again.

2003-10-23  Marco Pesenti Gritti  <marco@gnome.org>

	* data/ui/epiphany-toolbar.xml:
	* lib/egg/egg-editable-toolbar.c: (get_toolbar_position),
	(get_dock_nth), (get_toolbar_nth), (create_dock), (update_fixed),
	(toolbar_added_cb), (toolbar_removed_cb),
	(egg_editable_toolbar_construct), (egg_editable_toolbar_init),
	(egg_editable_toolbar_finalize), (egg_editable_toolbar_show),
	(egg_editable_toolbar_hide), (egg_editable_toolbar_set_fixed):
	* lib/egg/egg-editable-toolbar.h:
	* src/Makefile.am:
	* src/toolbar.c: (toolbar_setup_actions), (toolbar_init),
	(toolbar_spinner_start), (toolbar_spinner_stop):

	Move the spinner in his own mini toolbar.

2003-10-23  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/EphyEventListener.cpp:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/EventContext.cpp:

	Every time you change API God kills a kitten.
	Think of the kitten!! (That means you, Mozilla :)

2003-10-22  Marco Pesenti Gritti  <marco@gnome.org>

	* data/ui/Makefile.am:

	Add xml files to extra data

2003-10-22  Marco Pesenti Gritti  <marco@gnome.org>

	* NEWS:

	Update for 1.1.0

2003-10-21  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-editable-toolbar.c: (drag_begin_cb), (drag_end_cb),
	(set_drag_cursor), (unset_drag_cursor), (create_item_from_action),
	(create_item), (data_is_separator), (set_status_pending),
	(get_status_pending), (drag_data_received_cb), (remove_toolbar_cb),
	(popup_toolbar_context_menu_cb), (free_dragged_item),
	(toolbar_drag_drop_cb), (toolbar_drag_motion_cb),
	(toolbar_drag_leave_cb), (create_toolbar), (item_removed_cb),
	(egg_editable_toolbar_set_drag_dest):
	* lib/egg/egg-toolbar-editor.c: (drag_begin_cb), (drag_end_cb),
	(editor_create_item):

	Use new api for highlighting and make it pick up and drop behavior

2003-10-20  Christian Persch  <chpe@cvs.gnome.org>

	Encoding menu improvements, Episode V:
	MPT strikes back.

	* data/glade/epiphany.glade:
	* embed/ephy-encodings.c: (ephy_encodings_finalize),
	(ephy_encodings_init):
	* embed/ephy-encodings.h:
	* src/ephy-encoding-dialog.c: (encoding_is_automatic),
	(sync_embed_cb), (activate_choice),
	(ephy_encoding_dialog_response_cb), (view_node_selected_cb),
	(view_node_activated_cb), (ephy_encoding_dialog_init):

	Replace the 2-pane view with a single list, and restore
	the automatic and manual radio buttons.

2003-10-20  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (setup_filters),
	(ephy_history_window_construct):

	Make sure that both sites and hosts are filtered
	on construct

2003-10-19  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/downloader-view.c: (downloader_view_build_ui):
	* src/language-editor.c: (language_editor_set_view):

	unref the model once it's set in the view

2003-10-19  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-location-action.c: (remove_completion_actions):

	Index are not identifiers

2003-10-19  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (update_host_on_child_remove),
	(update_hosts):

	We cant remove while iterating childrens, build a list
	and remove later.

2003-10-19  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-location-action.c: (init_actions_list):

	Thaw smartbookmarks node after use.

2003-10-19  Marco Pesenti Gritti  <marco@gnome.org>

	* TODO:
	* embed/ephy-download.c: (ephy_download_class_init),
	(ephy_download_init), (update_remaining_time),
	(ephy_download_get_remaining_time):
	* embed/ephy-download.h:

	Update remaning time every two seconds

	* embed/mozilla/mozilla-download.cpp:

	Source/target was swapped

	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:

	Fix style

2003-10-19  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (update_hosts):

	do not try to remove All node

2003-10-19  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/mozilla-embed-persist.cpp:

	cleanup. Fix warning when fetching favicons.

2003-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/EphyHeaderSniffer.cpp:

	Looks like I copied a bug from mozilla js code.
	Do not show bogus checkbox.

2003-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/MozDownload.cpp:

	initialize cur/total size

2003-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	* TODO:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:

	fixup style

2003-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:

	Add nsIAuthPrompt implementation, necessary
	to make downloads on authenticated pages work.

2003-10-18  Christian Persch  <chpe@cvs.gnome.org>

	* src/bookmarks/ephy-bookmarks.c: (add_to_favorites),
	(history_site_visited_cb):
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_get_type),
	(ephy_favorites_menu_clean), (ephy_favorites_menu_rebuild),
	(ephy_favorites_menu_set_property),
	(ephy_favorites_menu_get_property),
	(ephy_favorites_menu_class_init), (do_updates), (fav_removed_cb),
	(fav_added_cb), (ephy_favorites_menu_init),
	(ephy_favorites_menu_finalize), (ephy_favorites_menu_new):
	* src/ephy-favorites-menu.h:
	* src/ephy-window.c:
	* src/ephy-window.h:

	Get rid of the last vestige of ephy_window_update_control(), and make
	the favourites menu self-updating.

2003-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-window.c: (setup_window):

	Show encoding menu also when empty, fix
	oddness when opening View menu

2003-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/EphyWrapper.cpp:

	Fix string for old mozilla versions.

2003-10-18  Christian Persch  <chpe@cvs.gnome.org>

	Encoding menu improvements, Part 4:
	The Rewrite.

	* data/glade/epiphany.glade:
	* data/ui/epiphany-ui.xml:
	* data/ui/nautilus-epiphany-view.xml.in:
	* embed/Makefile.am:
	* embed/ephy-embed-shell.c: (ephy_embed_shell_init),
	(ephy_embed_shell_finalize), (ephy_embed_shell_new),
	(ephy_embed_shell_get_encodings):
	* embed/ephy-embed-shell.h:
	* embed/ephy-embed-utils.c: (ephy_embed_utils_save):
	* embed/ephy-embed-utils.h:
	* embed/ephy-embed.c: (ephy_embed_get_encoding_info):
	* embed/ephy-embed.h:
	* embed/ephy-encodings.c: (ephy_encodings_get_type),
	(ephy_encodings_finalize), (ephy_encodings_class_init),
	(ephy_encodings_get_node), (ephy_encodings_get_encodings),
	(ephy_encodings_get_detectors), (ephy_encodings_get_all),
	(ephy_encodings_get_categories), (ephy_encodings_add_recent),
	(ephy_encodings_get_recent), (ephy_encodings_init),
	(ephy_encoding_info_free), (ephy_encodings_new):
	* embed/ephy-encodings.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-embed.cpp:
	* embed/mozilla/mozilla-notifiers.cpp:
	* lib/Makefile.am:
	* lib/ephy-encodings.c:
	* lib/ephy-encodings.h:
	* lib/ephy-langs.c: (ephy_font_languages), (ephy_font_n_languages):
	* lib/ephy-langs.h:
	* src/Makefile.am:
	* src/ephy-encoding-dialog.c: (ephy_encoding_dialog_get_type),
	(setup_filter), (sync_embed_cb), (sync_active_tab),
	(ephy_encoding_dialog_set_window), (activate_choice),
	(activate_automatic), (ephy_encoding_dialog_response_cb),
	(category_node_selected_cb), (view_node_selected_cb),
	(view_node_activated_cb), (ephy_encoding_dialog_init),
	(ephy_encoding_dialog_finalize),
	(ephy_encoding_dialog_set_property),
	(ephy_encoding_dialog_get_property),
	(ephy_encoding_dialog_class_init), (ephy_encoding_dialog_new):
	* src/ephy-encoding-dialog.h:
	* src/ephy-encoding-menu.c: (ephy_encoding_menu_init),
	(sort_encodings), (add_menu_item), (update_encoding_menu_cb),
	(encoding_activate_cb), (add_action),
	(ephy_encoding_menu_view_dialog_cb),
	(ephy_encoding_menu_automatic_cb), (ephy_encoding_menu_set_window),
	(ephy_encoding_menu_finalize), (ephy_encoding_menu_class_init),
	(ephy_encoding_menu_new):
	* src/ephy-nautilus-view.c: (gnv_bonobo_control_activate_cb),
	(gnv_cmd_select_encoding), (gnv_cmd_edit_find):
	* src/ephy-window.c: (ephy_window_set_active_tab),
	(setup_notebook), (ephy_window_set_property),
	(ephy_window_get_property), (ephy_window_class_init):
	* src/language-editor.h:
	* src/pdm-dialog.c: (setup_passwords_treeview),
	(setup_cookies_treeview):
	* src/prefs-dialog.c: (prefs_dialog_finalize),
	(get_current_language_code), (fonts_language_info_cmp),
	(create_fonts_language_menu), (find_encoding_in_list_cmp),
	(sort_encodings), (create_optionmenu), (prefs_dialog_init):

	Made encodings menu dynamic, containing recently used items + items
	related to the currently active encoding. Split encodings out as a
	embed shell service, port all users over to that. Harvest all encoding
	info we can get from mozilla.

2003-10-17  Marco Pesenti Gritti  <marco@gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_show), (ephy_bookmarks_editor_class_init),
	(ephy_bookmarks_editor_construct):

	Grab focus in the entry when showing because we dont
	rebuild the dialog.

2003-10-17  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/mozilla-embed-persist.cpp:

	Fix Save As, we need ever to pass the url now.
	Now hope chpe stop to bug me about things
	xan broke ...

2003-10-16  Mark McLoughlin  <mark@skynet.ie>

	Change the behaviour of --nautilus-view such that the process
	doesn't exit until the last control has been destroyed. The
	previous behaviour caused intermittent activation failure
	when the process timed out and died before the view could be
	created - bug #124768.

	* src/ephy-main.c:
	(ephy_main_start): don't unref the shell when started with
	--nautilus-view. 
	(ephy_main_dummy_url_argument),
	(ephy_main_translate_url_arguments): create a dummy argument
	when no arguments are supplied which will cause the default
	window to be opened.
	
	* src/ephy-shell.c:
	(ephy_nautilus_view_all_controls_dead): unref the shell
	here causing the process to exit.
	(ephy_nautilus_view_init_factory): setup the all_controls_dead
	callback.
	(ephy_nautilus_view_new): instrument the control.

2003-10-17  Ettore Perazzoli  <ettore@ximian.com>
 
	* src/bookmarks/ephy-bookmarks-editor.c
	(ephy_bookmarks_editor_construct): Make the search entry grab the
	focus, for added ease of use when using the keyboard.

2003-10-15  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/EventContext.cpp:

	Include config.h.

2003-10-14  Kristian Rietveld  <kris@gtk.org>
 
 	* configure.in: also support mozilla 1.5. (Works fine, verified with
 	mozilla 1.5rc2).

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_class_init),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (ephy_location_entry_activate):
	* lib/widgets/ephy-location-entry.h:
	* src/ephy-history-window.c: (confirmation_dialog_response_cb):
	* src/ephy-location-action.c: (remove_completion_actions),
	(add_completion_actions), (connect_proxy),
	(ephy_location_action_set_address):
	* src/ephy-location-action.h:
	* src/toolbar.c:
	* src/toolbar.h:

	Make location a normal entry.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_set_completion):

	Unref completion

2003-10-13  Christian Persch  <chpe@cvs.gnome.org>

	* embed/ephy-embed-single.c: (ephy_embed_single_free_passwords):
	* embed/ephy-embed-single.h:
	* embed/ephy-embed-utils.c:
	(ephy_embed_utils_build_encodings_submenu):
	* embed/mozilla/mozilla-embed-single.cpp:
	* embed/mozilla/mozilla-notifiers.cpp:
	* lib/Makefile.am:
	* lib/ephy-encodings.c: (ephy_encoding_info_free),
	(encodings_info_cmp), (ephy_encodings_get_list):
	* lib/ephy-encodings.h:
	* lib/ephy-langs.c: (ephy_lang_group_info_free),
	(lang_group_info_cmp), (ephy_lang_get_group_list),
	(fonts_language_info_cmp), (ephy_font_langs_get_codes_list),
	(ephy_font_langs_get_list):
	* lib/ephy-langs.h:
	* po/POTFILES.in:
	* src/ephy-encoding-menu.c: (ephy_encoding_menu_set_window),
	(ephy_encoding_menu_rebuild):
	* src/prefs-dialog.c: (prefs_dialog_finalize),
	(get_current_language_code), (create_fonts_language_menu),
	(default_encoding_menu_changed_cb), (find_encoding_in_list_cmp),
	(create_default_encoding_menu):

	Encodings menu improvements, part 3: Refactored the encodings
	list; it no longer is neccessary to have it in the embed single.
	Ported all callers to new infrastructure.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* data/art/Makefile.am:
	* lib/egg/Makefile.am:
	* lib/egg/egg-editable-toolbar.c: (set_drag_cursor):

	Use a costum icon for the cursor

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-editable-toolbar.c: (set_drag_cursor),
	(unset_drag_cursor), (create_item),
	(egg_editable_toolbar_set_edit_mode):

	Better implementation of cursor.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/egg-editable-toolbar.c: (enter_notify_cb),
	(leave_notify_cb), (create_item):

	Show a different cursor when hovering toolbar items
	in edit mode.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (add_bookmarks_source),
	(import_dialog_response_cb), (cmd_bookmarks_import):

	Port to new combo.

2003-10-13  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (add_by_date_filter),
	(time_combo_changed_cb), (build_search_box), (save_date_filter):

	Port to new combo. Size is wrong, prolly a bug in combo
	size request, will look at it later.

2003-10-13  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/mozilla-notifiers.cpp:
	(get_system_language):

	Return "en" when in C locale.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/EphyWrapper.cpp:

	Include config.h.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/mozilla-embed.cpp:

	Adapt EphyWrapper::GetEncoding to varying mozilla APIs.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* embed/ephy-embed.c: (ephy_embed_get_encoding):
	* embed/ephy-embed.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/mozilla-embed.cpp:
	* src/ephy-encoding-menu.c: (ephy_encoding_menu_verb_cb),
	(update_encoding_menu_cb), (ephy_encoding_menu_set_window):

	Encoding menu improvements, part 2: Implement ephy_embed_get_encoding,
	and use it in the menu to indicate the encoding of the loaded page.

2003-10-11  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-encoding-menu.c: (ephy_encoding_menu_get_type),
	(ephy_encoding_menu_verb_cb), (ephy_encoding_menu_init),
	(ephy_encoding_menu_set_window), (ephy_encoding_menu_set_property),
	(ephy_encoding_menu_get_property), (ephy_encoding_menu_class_init),
	(ephy_encoding_menu_new), (ephy_encoding_menu_rebuild):
	* src/ephy-encoding-menu.h:

	Encodings menu improvements, part 1: Ported to new gtk ui manager
	api, and general code cleanups.

2003-10-10  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/FilePicker.cpp:
	* embed/mozilla/FilePicker.h:
	* embed/mozilla/mozilla-embed-single.cpp:
	* lib/Makefile.am:
	* lib/ephy-dialog.c: (get_pref_type_from_widget),
	(prefs_connect_signals), (load_props), (save_props):
	* lib/ephy-gui.h:
	* lib/widgets/Makefile.am:
	* src/Makefile.am:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-topic-action.c:
	* src/ephy-history-window.c:

	Reenable deprecated api where necessary, fixup some
	header inclusions.
	Remove unused color picker control in ephy-dialog.
	Remove unused file types optionmenu in Filepicker.

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-tree-model-node.c: (root_child_removed_cb),
	(get_path_real), (root_child_added_cb),
	(ephy_tree_model_node_update_node), (root_child_changed_cb),
	(root_children_reordered_cb), (root_destroy_cb),
	(ephy_tree_model_node_class_init), (ephy_tree_model_node_init),
	(ephy_tree_model_node_finalize),
	(ephy_tree_model_node_add_prop_column),
	(ephy_tree_model_node_add_func_column),
	(ephy_tree_model_node_get_column_type),
	(ephy_tree_model_node_get_value), (ephy_tree_model_node_get_iter),
	(ephy_tree_model_node_get_path), (ephy_tree_model_node_iter_next),
	(ephy_tree_model_node_iter_children),
	(ephy_tree_model_node_iter_n_children),
	(ephy_tree_model_node_iter_nth_child),
	(ephy_tree_model_node_iter_from_node),
	(ephy_tree_model_node_tree_model_init):
	* lib/widgets/ephy-tree-model-node.h:

	Merge fixes from branch and clean up.

2003-10-16  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/ContentHandler.cpp:

	pass handler with full path, not only
	exec name. I dont get how it worked before.

2003-10-16  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-cell-renderer-progress.c:
	(ephy_cell_renderer_progress_init),
	(ephy_cell_renderer_progress_set_value),
	(ephy_cell_renderer_progress_set_property), (compute_dimensions),
	(ephy_cell_renderer_progress_get_size),
	(ephy_cell_renderer_progress_render),
	(ephy_cell_renderer_progress_finalize),
	(ephy_cell_renderer_progress_class_init):
	* lib/widgets/ephy-cell-renderer-progress.h:

	fix for unknown/failed states

2003-10-16  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:

	Unbreak for real.

2003-10-16  Xan Lopez  <xan@masilla.org>

	* TODO:
	* embed/downloader-view.c:
	* embed/mozilla/MozDownload.cpp:

	Evil marco loves to break my changes, ahem.

2003-10-16  Marco Pesenti Gritti  <marco@gnome.org>

	* TODO:
	* embed/downloader-view.c: (downloader_view_init),
	(get_row_from_download), (download_changed_cb),
	(downloader_view_add_download), (downloader_view_build_ui),
	(download_dialog_pause_cb), (downloader_view_remove_download),
	(download_dialog_abort_cb):
	* embed/ephy-download.c: (ephy_download_get_state):
	* embed/ephy-download.h:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:
	* embed/mozilla/mozilla-download.cpp:

	Implement state.

2003-10-16  Marco Pesenti Gritti  <marco@gnome.org>

	* data/glade/epiphany.glade:

	Remove details

	* embed/downloader-view.c:

	Remove details button leftover

2003-10-16  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/MozDownload.cpp:

	Fix some bugs

2003-10-16  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-embed-persist.h:
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_download):
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:

	Implement no_view downloads and use for favicons.

2003-10-15  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/MozDownload.cpp:

	Fix reference problem when using persist.

2003-10-15  Xan Lopez  <xan@masilla.org>

	* data/glade/epiphany.glade:
	* embed/downloader-view.c: (downloader_view_init),
	(downloader_view_finalize), (download_changed_cb),
	(downloader_view_add_download), (downloader_view_build_ui),
	(download_dialog_pause_cb), (downloader_view_remove_download),
	(download_dialog_abort_cb), (download_dialog_delete_cb):

	Re-add abort UI, drop details
	Serious glade cleanup is left as an exercise for the reader

2003-10-15  Xan Lopez  <xan@masilla.org>

	* data/glade/epiphany.glade:
	* embed/downloader-view.c: (downloader_view_add_download),
	(download_dialog_pause_cb), (download_dialog_abort_cb):
	* embed/downloader-view.h:
	
	Fix stop button (UI not updated yet)
	
	* embed/mozilla/MozDownload.cpp:

	Init mEmbedPersist to nsnull (Marco)

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/downloader-view.c: (format_interval),
	(download_changed_cb), (downloader_view_build_ui):
	* embed/ephy-download.c: (ephy_download_get_remaining_time),
	(ephy_download_get_current_progress),
	(ephy_download_get_total_progress), (ephy_download_get_percent),
	(ephy_download_get_elapsed_time):
	* embed/ephy-download.h:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:
	* embed/mozilla/mozilla-download.cpp:
	* lib/widgets/Makefile.am:

	Get back the treeview info to work. Use
	procman progress renderer for percent.

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/downloader-view.c: (download_changed_cb),
	(downloader_view_add_download):

	Fix percent/filenamee

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/downloader-view.c: (download_changed_cb),
	(downloader_view_add_download), (downloader_view_build_ui),
	(downloader_treeview_selection_changed_cb):
	* embed/ephy-download.c: (ephy_download_class_init),
	(ephy_download_new), (ephy_download_get_name):
	* embed/ephy-download.h:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:

	Implement a download changed signal and try to update
	percent in the treeview.

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-download.c: (ephy_download_get_source),
	(ephy_download_get_target), (ephy_download_get_percent):
	* embed/ephy-download.h:
	* embed/mozilla/mozilla-download.cpp:

	Implement basic download info getters.

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/Makefile.am:
	* embed/downloader-view.c: (destroy_details_cb),
	(downloader_view_update_controls),
	(downloader_view_update_details),
	(downloader_view_set_download_info),
	(downloader_view_add_download), (downloader_view_build_ui),
	(download_dialog_pause_cb), (download_dialog_abort_cb),
	(downloader_treeview_selection_changed_cb),
	(download_dialog_delete_cb), (open_selection_foreach),
	(download_dialog_open_cb):
	* embed/downloader-view.h:
	* embed/ephy-download.c: (ephy_download_get_type),
	(ephy_download_class_init), (ephy_download_init),
	(ephy_download_new), (ephy_download_cancel), (ephy_download_pause),
	(ephy_download_resume):
	* embed/ephy-download.h:
	* embed/ephy-embed-shell.c: (impl_get_downloader_view):
	* embed/mozilla/EphyDownload.cpp:
	* embed/mozilla/EphyDownload.h:
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/mozilla-download.cpp:
	* embed/mozilla/mozilla-download.h:
	* embed/mozilla/mozilla-embed-persist.cpp:
	* lib/Makefile.am:
	* lib/widgets/Makefile.am:
	* src/Makefile.am:
	* src/bookmarks/Makefile.am:

	Big architectural changes. Now I think it make sense,
	but we need to rewrite a lot of ui code.

2003-10-14  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (downloader_view_class_init),
	(download_dialog_pause_cb), (delete_pending_foreach):
	* embed/mozilla/mozilla-downloader-view.cpp:
	* embed/mozilla/mozilla-downloader-view.h:

	Some cleanups.

2003-10-14  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (download_dialog_abort_cb),
	(downloader_cancel_download):
	* embed/mozilla/mozilla-downloader-view.cpp:

	Evil stuff.

2003-10-14  Xan Lopez  <xan@masilla.org>

	* embed/ephy-embed-shell.c: (impl_get_downloader_view):
	* embed/mozilla/mozilla-downloader-view.cpp:
	* embed/mozilla/mozilla-downloader-view.h:

	And More.

2003-10-13  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/EphyDownload.h:

	Cleanup
	
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-downloader-view.cpp:
	* embed/mozilla/mozilla-downloader-view.h:

	Yet More Work.

2003-10-13  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (downloader_view_class_init),
	(download_dialog_pause_cb), (download_dialog_abort_cb),
	(delete_pending_foreach), (downloader_cancel_download),
	(downloader_pause_download), (downloader_resume_download):
	* embed/downloader-view.h:

	More work.

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/EphyHeaderSniffer.cpp:

	Fix crash when download start

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-embed-persist.h:
	* embed/ephy-embed-popup-control.c: (save_property_url),
	(embed_popup_download_link_cmd), (embed_popup_save_image_as_cmd),
	(save_url), (embed_popup_save_page_as_cmd),
	(embed_popup_save_background_as_cmd):
	* embed/ephy-embed-utils.c: (ephy_embed_utils_save):
	* embed/ephy-embed-utils.h:
	* embed/mozilla/EphyDownload.cpp:
	* embed/mozilla/EphyDownload.h:
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:
	* embed/mozilla/mozilla-embed-persist.cpp:
	* src/popup-commands.c: (save_property_url),
	(popup_cmd_download_link), (popup_cmd_save_image_as),
	(popup_cmd_save_background_as):
	* src/window-commands.c: (window_cmd_file_save_as):

	Make embed-persist use nsIDownload and cleanup api a bit.

2003-10-06  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/ContentHandler.cpp:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/EventContext.cpp:
	* embed/mozilla/GlobalHistory.h:
	* embed/mozilla/ProgressListener.cpp:
	* embed/mozilla/ProgressListener.h:
	* embed/mozilla/mozilla-embed-persist.cpp:

	Remove ProgressListener again, hopefully everything
	compiles without it now.

2003-10-06  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/EphyDownload.cpp:
	* embed/mozilla/EphyDownload.h:
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/ProgressListener.cpp:
	* embed/mozilla/ProgressListener.h:
	* embed/mozilla/mozilla-embed-persist.cpp:

	Cleanups.

2003-10-06  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/Makefile.am:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/mozilla-embed-persist.cpp:

	Make it work, behold the all new EphyDownload.

2003-10-06  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-notebook.c: (find_notebook_at_pointer),
	(ephy_notebook_init), (ephy_notebook_finalize):

	Allow dragging of tabs to a window even when the tabs bar is not
	shown. Fixes bug #123908.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (setup_filters),
	(site_node_selected_cb), (search_entry_search_cb),
	(time_optionmenu_changed_cb):
	
	More granular filtering update

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (update_host_on_child_remove),
	(update_hosts), (page_removed_from_host_cb), (ephy_history_init),
	(ephy_history_finalize):

	Update host last visit when removing sites from it.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (search_entry_search_cb):
	
	update priv->select_node, signals are blocked so it would
	not be updated otherwise

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-node-view.c: (did_not_drag):

	Do not unselect all on single selection mode, to not generate
	useless node selection changes.

	* src/ephy-history-window.c: (site_node_selected_cb):

	Do not refilter if the new selected node is the same
	as the old one.

2003-10-03  Christian Persch  <chpe@cvs.gnome.org>

	* lib/egg/egg-toolbars-model.c: (safe_save_xml),
	(egg_toolbars_model_load):

	Check for failed load of the toolbars model from the XML file,
	and fix the check for failed save of same to the XML file.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* src/bookmarks/ephy-bookmarks-menu.c: (add_bookmarks_menu),
	(ephy_bookmarks_menu_rebuild):

	Use new gtk api for empty submenus

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-completion-model.c: (node_iter_from_node),
	(ephy_completion_model_init), (ephy_completion_model_get_value),
	(ephy_completion_model_get_iter), (ephy_completion_model_get_path),
	(ephy_completion_model_iter_next),
	(ephy_completion_model_iter_children),
	(ephy_completion_model_iter_n_children),
	(ephy_completion_model_iter_nth_child):

	Add stamp.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (completion_func),
	(match_selected_cb), (ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (sort_func),
	(ephy_location_entry_set_completion):
	* lib/widgets/ephy-location-entry.h:
	* src/Makefile.am:
	* src/ephy-completion-model.c: (ephy_completion_model_class_init),
	(root_child_removed_cb), (node_iter_from_node), (get_path_real),
	(root_child_added_cb), (root_child_changed_cb), (connect_signals),
	(ephy_completion_model_init),
	(ephy_completion_model_get_column_type), (init_text_col),
	(init_action_col), (init_keywords_col), (init_relevance_col),
	(ephy_completion_model_get_value),
	(ephy_completion_model_get_iter):
	* src/ephy-location-action.c: (connect_proxy):

	Implement our own completion model. The big part of the
	new location entry impl is done. When gtk completion will
	be fixed I'll be able to merge this on head.

2003-10-05  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_class_init), (entry_activate_cb):
	* lib/widgets/ephy-location-entry.h:

	Remove the activated signal.

	* src/ephy-location-action.c: (action_activated_cb),
	(location_url_activate_cb), (remove_completion_actions),
	(add_completion_actions), (connect_proxy),
	(ephy_location_action_init):

	Just use entry activate signal. Implement smart
	bookmarks activation.

2003-10-05  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/ephy-node-common.h:
	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_get_entry):
	* lib/widgets/ephy-location-entry.h:
	* src/bookmarks/ephy-bookmark-action.c: (sync_bookmark_properties):
	* src/bookmarks/ephy-bookmarks-export.c:
	(ephy_bookmarks_export_rdf):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_init),
	(update_has_smart_address), (ephy_bookmarks_add),
	(ephy_bookmarks_set_address), (ephy_bookmarks_unset_keyword),
	(ephy_bookmarks_get_smart_bookmarks):
	* src/bookmarks/ephy-bookmarks.h:

	Modify smart bookmarks to use a separate root instead
	of a property.

	* src/ephy-location-action.c: (remove_completion_actions),
	(add_completion_actions), (connect_proxy), (init_actions_list),
	(update_actions_list), (actions_child_removed_cb),
	(actions_child_added_cb), (actions_child_changed_cb),
	(ephy_location_action_init), (ephy_location_action_finalize):

	Implement smart bookmarks as location actions.

2003-10-05  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (add_to_history),
	(entry_activate_cb), (ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (save_location_history),
	(ephy_location_entry_finalize),
	(ephy_location_entry_clear_history):
	
	Implement location history.

	* lib/widgets/ephy-tree-model-node.c: (root_children_reordered_cb):

	Fixup reorder notification.

2003-10-03  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (match_selected_cb),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_add_completion):

	Do not create multiple gtk completions, open the
	url when a match is selected.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/egg/Makefile.am:
	* lib/egg/eggtreemodelunion.c:
	* lib/egg/eggtreemodelunion.h:

	Add from libegg.

	* lib/widgets/ephy-location-entry.c: (completion_func),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_add_completion):
	* lib/widgets/ephy-location-entry.h:
	* lib/widgets/ephy-tree-model-node.c:
	(ephy_tree_model_node_get_value):
	* src/ephy-location-action.c: (connect_proxy):

	Merge bookmarks in autocompletion and implement
	case unsensitive match.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (completion_func),
	(ephy_location_entry_init), (ephy_location_entry_add_completion):

	Costum match function to deal with prefixes.

	* lib/widgets/ephy-tree-model-node.c:
	(ephy_tree_model_node_get_column_type),
	(ephy_tree_model_node_get_value):

	Fix column indexes.

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (entry_button_press_cb),
	(ephy_location_entry_construct_contents):

	Put back double click -> select all

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c: (location_focus_out_cb),
	(ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (ephy_location_entry_finalize),
	(ephy_location_entry_add_completion),
	(ephy_location_entry_set_location),
	(ephy_location_entry_get_location), (ephy_location_entry_activate),
	(ephy_location_entry_clear_history):
	* lib/widgets/ephy-location-entry.h:

	cleanups

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (ephy_history_get_type),
	(ephy_history_init), (ephy_history_visited):
	* lib/Makefile.am:
	* lib/ephy-autocompletion-source.c:
	* lib/ephy-autocompletion-source.h:
	* lib/ephy-autocompletion.c:
	* lib/ephy-autocompletion.h:
	* lib/widgets/Makefile.am:
	* lib/widgets/ephy-autocompletion-window.c:
	* lib/widgets/ephy-autocompletion-window.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_get_type),
	(bookmarks_changed_cb), (bookmarks_removed_cb),
	(ephy_bookmarks_init), (ephy_bookmarks_add):

	Remove old implementation completely

2003-10-01  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_class_init), (editable_changed_cb),
	(entry_activate_cb), (ephy_location_entry_construct_contents),
	(ephy_location_entry_init), (ephy_location_entry_finalize),
	(ephy_location_entry_new), (ephy_location_entry_add_completion),
	(ephy_location_entry_set_location),
	(ephy_location_entry_clear_history):
	* lib/widgets/ephy-location-entry.h:
	* lib/widgets/ephy-tree-model-node.c:
	(ephy_tree_model_node_add_prop_column),
	(ephy_tree_model_node_add_func_column):
	* src/ephy-location-action.c: (connect_proxy):
	* src/ephy-shell.c: (ephy_shell_finalize),
	(ephy_shell_get_session):
	* src/ephy-shell.h:

	Beginning of new location entry implementation

2003-09-30  Marco Pesenti Gritti  <marco@gnome.org>

	* data/epiphany.schemas.in:
	* data/ui/epiphany-history-window-ui.xml:
	* src/ephy-history-window.c: (set_columns_visibility),
	(cmd_view_columns), (get_details_value),
	(ephy_history_window_construct):

	Implement view menu.

2003-09-30  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-history-window.c: (build_search_box):

	Use ngettext.

2003-09-30  Christian Persch  <chpe@cvs.gnome.org>

	* embed/print-dialog.c: (print_get_info):

	Don't pass NULL to gnome_vfs_expand_initial_tilde.

2003-09-30  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c:
	* src/ephy-history-window.c: (build_search_box):

	More accurate description for Ever filter.
	Keep the backend as is, so we dont have to change
	it if we change history expire.

2003-09-29  Marco Pesenti Gritti  <marco@gnome.org>

	* data/default-prefs.js:

	Add defaults in points for fonts

2003-09-28  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/mozilla-embed-single.cpp:

	The file picker dir can be NULL, check before
	trying to expand tilde.

	* src/bookmarks/ephy-bookmarks-editor.c:
	(import_dialog_response_cb), (cmd_bookmarks_import):

	Implement import from a file

2003-09-27  Xan Lopez  <xan@masilla.org>

	* configure.in:

	Forgot this.

2003-09-27  Xan Lopez  <xan@masilla.org>

	* configure.in:
	* embed/mozilla/ContentHandler.cpp:

	API sync, from galeon.

2003-09-27  Christian Persch  <chpe@cvs.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (cmd_bookmarks_import):
	* src/bookmarks/ephy-bookmarks-import.h:

	Offer to import from Firebird too.

2003-09-27  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/ephy-gui.c: (ephy_gui_get_pixbuf_from_mime_type):

	Simpler implementation.

	* lib/widgets/ephy-spinner.c: (ephy_spinner_load_images):
	* src/ephy-shell.c: (ephy_shell_init):

	Pass 0 as flags

2003-09-27  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/ContentHandler.cpp:
	* lib/ephy-gui.c: (make_mime_name),
	(ephy_gui_get_pixbuf_from_mime_type):
	* lib/ephy-gui.h:
	* lib/widgets/ephy-spinner.c: (ephy_spinner_init),
	(ephy_spinner_theme_changed), (ephy_spinner_load_images),
	(ephy_spinner_finalize):
	* src/ephy-shell.c: (ephy_shell_init):

	Use gtkicontheme, and use it also for mime icons.

2003-09-26  Marco Pesenti Gritti  <marco@gnome.org>

	* data/epiphany.schemas.in:
	* lib/ephy-node-filter.c: (ephy_node_filter_evaluate):
	* src/ephy-history-window.c: (ephy_history_window_finalize),
	(add_by_site_filter), (add_by_date_filter), (add_by_word_filter),
	(setup_filters), (site_node_selected_cb), (search_entry_search_cb),
	(time_optionmenu_changed_cb), (build_search_box),
	(ephy_history_window_construct), (save_date_filter),
	(ephy_history_window_dispose):

	Implement history time filter

2003-09-26  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-window.c:

	Remove unused includes, they was causing warnings on solaris

